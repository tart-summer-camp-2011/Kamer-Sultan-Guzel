<!DOCTYPE html>
<html>
<head>
    <title>FE303 - An Example of Observer Pattern</title>
    <script type="text/javascript" src="../tartJS/third_party/goog/goog/base.js"></script>
    <script type="text/javascript" src="../tartJS/tart/deps.js"></script>

    <script type="text/javascript">
        var Publisher = function(){
            this.subscribers = [];
            this.increase = 0.1;

        };

        Publisher.prototype.addSubscriber = function(subscriber){
            this.subscribers.push(subscriber);
            console.log(subscriber + " has been successfully subscribed!");

        };

        Publisher.prototype.notifySubscribers = function(){
            console.log("**New Prices**");
           // for (var i =0, length = this.subscribers.length; i < length; i++){
                //console.log(this.subscribers[i].price);
           // }
                appleStoreTR.updatePrice(this.increase);
                appleStoreUS.updatePrice(this.increase);
                appleStoreCA.updatePrice(this.increase);
            //}
            };

        var AppleStore = function( price, currency){
            this.price = price;
            this.currency = currency;
        };

        AppleStore.prototype.updatePrice = function(increase){
            this.price = this.price*(1+increase);
            console.log("The price is now " + this.price + " " + this.currency);
        };

        var appleStoreTR = new AppleStore("2000", "TL");
        var appleStoreUS = new AppleStore("950", "$");
        var appleStoreCA = new AppleStore("1050", "CAD");

        var appleCo = new Publisher();

        appleCo.addSubscriber("appleStoreTR");
        appleCo.addSubscriber("appleStoreUS");
        appleCo.addSubscriber("appleStoreCA");

        appleCo.notifySubscribers();



        
    </script>
    

</head>
<body>

</body>
</html>